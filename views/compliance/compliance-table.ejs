<div class="card table-wrapper">
    <table class="table">
        <thead>
            <tr>
                <th>Supplier</th>
                <th>Type</th>
                <th>Document</th>
                <th>Status</th>
                <th>Expiry</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
            <% records.forEach(r=> { %>
                <tr>
                    <td><strong>
                            <%= r.supplier_name %>
                        </strong></td>
                    <td>
                        <%= r.compliance_type %>
                    </td>
                    <td>
                        <% if (r.document_path) { %>
                            <a href="/<%= r.document_path %>" target="_blank">
                                <%= r.document_name %>
                            </a>
                            <% } else { %>
                                <span class="muted">No document</span>
                                <% } %>
                    </td>
                    <td>
                        <span class="status-pill <%= r.status.toLowerCase() %>">
                            <%= r.status %>
                        </span>
                    </td>
                    <td>
                        <%= new Date(r.expiry_date).toLocaleDateString() %>
                    </td>
                    <td>
                        <% if (role==='supplier' ) { %>
                            <!-- Upload form only for supplier -->
                            <form action="/compliance/upload/<%= r.id %>" method="POST" enctype="multipart/form-data"
                                class="upload-form">
                                <input type="file" name="document" required />
                                <button class="btn btn-ghost">Upload</button>
                            </form>
                            <% } %>
                    </td>
                </tr>
                <% }) %>
        </tbody>

    </table>
</div>